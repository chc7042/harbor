# 프로덕션 환경 인프라 연결 문제 해결 PRD

## 문제 상황

프로덕션 환경 harbor.roboetech.com에서 핵심 인프라 연결이 실패하여 실제 파일 다운로드가 불가능한 상황입니다.

### 발견된 문제들

1. **NAS 연결 실패**
   - NAS 스캔 실패: "Scheduled scan failed"
   - /nas/release_version 디렉토리 접근 불가
   - NAS_HOST=nas.roboetech.com 연결 실패
   - SMB 인증 실패 (NAS_USERNAME=nasadmin, NAS_PASSWORD=Cmtes123)

2. **LDAP 인증 실패**
   - LDAP_URL=ldap://172.30.1.97:389 연결 실패
   - "User not found in LDAP directory" 에러
   - 모든 사용자 로그인 시도 실패

3. **실제 파일 다운로드 불가능**
   - 즉시 다운로드는 구현되었으나 실제 파일이 없음
   - 크롬에서 "다운로드 재개중" 상태 (에러 응답 수신)
   - 119바이트 에러 응답 대신 실제 파일 전송 필요

## 해결 목표

1. **NAS 인프라 연결 복구**
   - nas.roboetech.com SMB 연결 확립
   - /nas/release_version 디렉토리 마운트
   - 3.0.0 메인 파일 접근 가능 상태

2. **LDAP 인증 시스템 복구**
   - LDAP 서버 연결 및 인증 기능 복구
   - 사용자 로그인 및 다운로드 권한 확인

3. **실제 파일 다운로드 검증**
   - 프로덕션에서 실제 파일 다운로드 성공
   - 즉시 다운로드 + 실제 파일 전송 완전 구현

## 기술적 요구사항

### NAS 연결 수정
- SMB 클라이언트 설정 검증
- 네트워크 연결성 확인 (nas.roboetech.com:445)
- 인증 정보 검증 (nasadmin/Cmtes123)
- 디렉토리 마운트 권한 확인

### LDAP 연결 수정
- LDAP 서버 연결 확인 (172.30.1.97:389)
- 바인드 DN 및 인증 정보 검증
- 사용자 검색 필터 및 속성 매핑 확인

### 대안 인증 방식
- 임시 Mock 인증 활성화 옵션
- 개발용 테스트 계정 설정
- 인증 우회 다운로드 테스트 엔드포인트

## 성공 기준

1. **인프라 연결**: NAS와 LDAP 모두 정상 연결
2. **사용자 인증**: 실제 사용자 로그인 성공
3. **파일 다운로드**: 프로덕션에서 실제 3.0.0 메인 파일 다운로드 성공
4. **성능**: 즉시 다운로드 (1초 이내 시작) + 실제 파일 전송

## 우선순위

- **P0**: NAS 연결 복구 (파일 다운로드 핵심 기능)
- **P1**: LDAP 인증 복구 (사용자 접근 제어)
- **P2**: 전체 시스템 통합 테스트

이 문제들이 해결되어야만 Harbor 시스템이 실제 프로덕션 환경에서 정상 작동할 수 있습니다.