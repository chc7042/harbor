# Harbor Production Environment Configuration
# This file contains production environment variables for the Harbor deployment system.
# Copy this file to .env.prod for production use and update values accordingly.

# ==============================================================================
# APPLICATION SETTINGS
# ==============================================================================
# Core application environment settings
NODE_ENV=production                        # Application environment (development/production)
LOG_LEVEL=info                            # Logging level (error/warn/info/debug)
NODE_OPTIONS=--openssl-legacy-provider   # Node.js runtime options for legacy SSL support

# ==============================================================================
# NETWORK & SERVER CONFIGURATION
# ==============================================================================
# Server port and URL configuration
BACKEND_PORT=3001                         # Backend API server port
HTTP_PORT=80                             # HTTP port for nginx
HTTPS_PORT=443                           # HTTPS port for nginx (when SSL enabled)
VITE_API_URL=/api # Frontend API base URL (relative path)

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
# PostgreSQL database connection settings
DB_HOST=harbor-postgres-prod             # Database host (container name in Docker)
DB_PORT=5432                             # Database port
DB_NAME=harbor_prod                      # Database name
DB_USER=harbor_user                      # Database username
DB_PASSWORD=harbor_production_password_2024  # Database password

# PostgreSQL container initialization settings
POSTGRES_DB=harbor_prod                  # Initial database name for container
POSTGRES_USER=harbor_user                # Initial database user for container
POSTGRES_PASSWORD=harbor_prod_secure_password_2024  # Initial database password for container

# ==============================================================================
# AUTHENTICATION & SECURITY
# ==============================================================================
# JWT token configuration for user authentication
JWT_SECRET=harbor_production_jwt_secret_key_2024_very_secure_random_string        # JWT signing secret
JWT_REFRESH_SECRET=harbor_production_refresh_secret_key_2024_very_secure_random   # JWT refresh token secret
JWT_EXPIRES_IN=1h                        # Access token expiration time
JWT_REFRESH_EXPIRES_IN=7d                # Refresh token expiration time


# ==============================================================================
# LDAP AUTHENTICATION
# ==============================================================================
# LDAP server configuration for user authentication - Verified working settings
LDAP_URL=ldap://172.30.1.97:389          # LDAP server URL
LDAP_PORT=389                            # LDAP server port
LDAP_BIND_DN=cn=admin,dc=roboetech,dc=com  # LDAP bind DN for authentication
LDAP_BIND_CREDENTIALS=admin              # LDAP bind password

# LDAP search configuration
LDAP_SEARCH_BASE=ou=users,dc=roboetech,dc=com  # Base DN for user search
LDAP_SEARCH_FILTER=(|(uid={{username}})(cn={{username}}))  # User search filter
LDAP_GROUP_BASE=ou=groups,dc=roboetech,dc=com  # Base DN for group search

# LDAP connection timeouts and settings
LDAP_TIMEOUT=60000                       # General LDAP operation timeout (ms)
LDAP_CONNECT_TIMEOUT=30000               # LDAP connection timeout (ms)
LDAP_IDLE_TIMEOUT=300000                 # LDAP connection idle timeout (ms)
LDAP_RECONNECT=true                      # Enable automatic reconnection

# LDAP user attribute mapping
LDAP_ATTR_USERNAME=uid                   # LDAP attribute for username
LDAP_ATTR_EMAIL=mail                     # LDAP attribute for email
LDAP_ATTR_FULL_NAME=cn                   # LDAP attribute for full name
LDAP_ATTR_DEPARTMENT=department          # LDAP attribute for department

# LDAP default values and templates
LDAP_DN_TEMPLATE=uid={{username}},ou=users,dc=roboetech,dc=com  # DN template for user binding
LDAP_DEFAULT_EMAIL_DOMAIN=roboetech.com  # Default email domain for users
LDAP_DEFAULT_DEPARTMENT=Roboe               # Default department for users
LDAP_DEFAULT_DEPARTMENT_FALLBACK=Development  # Fallback department

# ==============================================================================
# JENKINS INTEGRATION
# ==============================================================================
# Jenkins webhook and API configuration
JENKINS_URL=https://jenkins.roboetech.com     # Jenkins server URL
JENKINS_USERNAME=jenkins                      # Jenkins API username
JENKINS_PASSWORD=adminjenkins                 # Jenkins API password/token
JENKINS_WEBHOOK_SECRET=harbor_jenkins_webhook_secret_2024  # Webhook authentication secret

# ==============================================================================
# SYNOLOGY NAS API CONFIGURATION
# ==============================================================================
# Synology NAS API connection settings
SYNOLOGY_BASE_URL=https://nas.roboetech.com:5001    # Synology NAS web interface URL
SYNOLOGY_USERNAME=nasadmin                          # Synology admin username
SYNOLOGY_PASSWORD=Cmtes123                          # Synology admin password
SYNOLOGY_SESSION_NAME=FileStation                   # Session name for API connection
SYNOLOGY_DEVICE_NAME=Harbor-Backend                 # Device name for API connection
SYNOLOGY_DEVICE_ID=harbor-backend-001               # Unique device ID for API connection
SYNOLOGY_FORMAT=sid                                 # API response format (sid/cookie)

# NAS scanner configuration
NAS_RELEASE_PATH=release_version                    # Base path for scanning (without leading slash)
NAS_SCAN_INTERVAL=*/15 * * * *                     # Cron expression for scan schedule (every 15 minutes)
NAS_MAX_FILE_SIZE=1073741824                       # Maximum file size to process (1GB in bytes)
NAS_ALLOWED_EXTENSIONS=.tar.gz,.zip,.jar,.war,.tgz # Allowed file extensions for scanning

# NAS scanner feature flags
NAS_WATCH_ENABLED=true                             # Enable real-time file watching
NAS_SCHEDULER_ENABLED=true                         # Enable scheduled scanning

# ==============================================================================
# MONITORING & ALERTING
# ==============================================================================
# Alert configuration for deployment failures
ALERT_CONSECUTIVE_FAILURES=5             # Number of consecutive failures before alert
ALERT_FAILURE_RATE_THRESHOLD=0.8         # Failure rate threshold (0.0-1.0)
ALERT_TIME_WINDOW_MINUTES=30             # Time window for failure rate calculation
ALERT_COOLDOWN_MINUTES=60                # Cooldown period between alerts

# ==============================================================================
# SSL/TLS CONFIGURATION
# ==============================================================================
# SSL certificate paths (used when HTTPS is enabled)
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem    # SSL certificate file path
SSL_KEY_PATH=/etc/nginx/ssl/key.pem      # SSL private key file path
SSL_DHPARAM_PATH=/etc/nginx/ssl/dhparam.pem  # Diffie-Hellman parameters file path

# ==============================================================================
# BACKUP CONFIGURATION
# ==============================================================================
# Database and system backup settings
BACKUP_ENABLED=true                      # Enable automated backups
BACKUP_SCHEDULE=0 2 * * *                # Backup schedule (cron: daily at 2 AM)
BACKUP_RETENTION_DAYS=30                 # Number of days to retain backups
BACKUP_LOCATION=/backups                 # Backup storage location

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================
# Enable/disable application features
FEATURE_WEBSOCKET=true                   # Enable WebSocket real-time updates
FEATURE_NOTIFICATIONS=true               # Enable system notifications
FEATURE_BACKUP=true                      # Enable backup functionality
